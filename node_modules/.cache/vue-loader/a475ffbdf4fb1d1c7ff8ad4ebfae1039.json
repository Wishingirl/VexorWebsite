{"remainingRequest":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\Menu.vue","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZmlzaC1tZW51JywKICBwcm9wczogewogICAgc2l6ZTogeyB0eXBlOiBTdHJpbmcgfSwKICAgIG1vZGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAndmVydGljYWwnIH0sIC8vIHZlcnRpY2FsLCBob3Jpem9udGFsLCBpbmxpbmUKICAgIGNvbXBhY3Q6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwgLy8g57Sn5YeRCiAgICBpbmRleERlbGltaXRlcjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICctJyB9LCAvLyBvcHRpb24gaW5kZXjlhoXlrrnnmoTliIbpmpTnrKYKICAgIGRlZmF1bHRBY3RpdmU6IHsgdHlwZTogU3RyaW5nIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlSXRlbTogbnVsbCwKICAgICAgbGFzdEFjdGl2ZUluZGV4OiBudWxsCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpdGVtczonLCB0aGlzLml0ZW1zKQogICAgaWYgKHRoaXMuZGVmYXVsdEFjdGl2ZSkgewogICAgICB0aGlzLnNldEFjdGl2ZSh0aGlzLmRlZmF1bHRBY3RpdmUpCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY2xhc3NPYmplY3QgKCkgewogICAgICByZXR1cm4gWwogICAgICAgICdmaXNoIG1lbnUnLAogICAgICAgIHRoaXMubW9kZSwKICAgICAgICB0aGlzLnNpemUsCiAgICAgICAgeydjb21wYWN0JzogdGhpcy5jb21wYWN0fQogICAgICBdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGlja0hhbmRsZXIgKGV2dCkgewogICAgICBpZiAoZXZ0LmluZGV4ID09PSB1bmRlZmluZWQpIHJldHVybgogICAgICB0aGlzLnNldEFjdGl2ZShldnQuaW5kZXgpCiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIGV2dC5pbmRleCkKICAgICAgdGhpcy4kZW1pdCgnY2xpY2snLCBldnQpCiAgICB9LAogICAgc2V0QWN0aXZlIChpbmRleCkgewogICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuCiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbmRleDonLCBpbmRleCwgJ2xhc3RJbmRleDonLCB0aGlzLmxhc3RBY3RpdmVJbmRleCkKICAgICAgbGV0IGl0ZW1zID0gdGhpcy5nZXRJdGVtcygpCiAgICAgIHRoaXMubGFzdEFjdGl2ZUluZGV4ICYmIHRoaXMubGFzdEFjdGl2ZUluZGV4LnRvU3RyaW5nKCkuc3BsaXQodGhpcy5pbmRleERlbGltaXRlcikuZm9yRWFjaCgoaSkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdsYXN0Lmk6JywgaSwgJz4+PicsIGl0ZW1zW2ldKQogICAgICAgIHRyeSB7CiAgICAgICAgICBpdGVtc1tpXS5hY3RpdmUgPSBmYWxzZQogICAgICAgICAgaWYgKGl0ZW1zW2ldLm1vZGUgPT09ICdpbmxpbmUnKSBpdGVtc1tpXS52aXNpYmxlID0gZmFsc2UKICAgICAgICAgIGl0ZW1zID0gaXRlbXNbaV0uaXRlbXMKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9KQoKICAgICAgdGhpcy5sYXN0QWN0aXZlSW5kZXggPSBpbmRleAogICAgICBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKQogICAgICBpbmRleC50b1N0cmluZygpLnNwbGl0KHRoaXMuaW5kZXhEZWxpbWl0ZXIpLmZvckVhY2goKGkpID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygnOjo6Ojo6Ojo6OicsIGksICc+Pj4nLCBpdGVtc1tpXSkKICAgICAgICBpZiAoaXRlbXNbaV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaXRlbXNbaV0uYWN0aXZlID0gdHJ1ZQogICAgICAgICAgICBpZiAoaXRlbXNbaV0ubW9kZSA9PT0gJ2lubGluZScpIGl0ZW1zW2ldLnZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdWInLCBpdGVtc1tpXSkKICAgICAgICAgICAgaXRlbXMgPSBpdGVtc1tpXS5pdGVtcwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZ2V0SXRlbXMgKCkgewogICAgICBjb25zdCBpdGVtcyA9IHt9CiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goKGVsZSkgPT4gewogICAgICAgIGlmIChlbGUuJG9wdGlvbnMubmFtZSA9PT0gJ2Zpc2gtb3B0Z3JvdXAnKSB7CiAgICAgICAgICBlbGUuJGNoaWxkcmVuLmZvckVhY2goKGUpID0+IHsKICAgICAgICAgICAgaWYgKGUuJG9wdGlvbnMubmFtZSA9PT0gJ2Zpc2gtb3B0aW9uJykgdGhpcy5pdGVtc1tlbGUuaW5kZXhdID0gZQogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgaWYgKFsnZmlzaC1vcHRpb24nLCAnZmlzaC1zdWJtZW51J10uaW5jbHVkZXMoZWxlLiRvcHRpb25zLm5hbWUpKSB7CiAgICAgICAgICBpdGVtc1tlbGUuaW5kZXhdID0gZWxlCiAgICAgICAgfQogICAgICB9KQogICAgICByZXR1cm4gaXRlbXMKICAgIH0KICB9Cgp9Cg=="},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Menu.vue","sourceRoot":"node_modules/fish-ui/src/components","sourcesContent":["<template>\n  <ul :class=\"classObject\" @click.stop=\"clickHandler\">\n    <slot></slot>\n  </ul>\n</template>\n<script>\n  export default {\n    name: 'fish-menu',\n    props: {\n      size: { type: String },\n      mode: { type: String, default: 'vertical' }, // vertical, horizontal, inline\n      compact: { type: Boolean, default: false }, // 紧凑\n      indexDelimiter: { type: String, default: '-' }, // option index内容的分隔符\n      defaultActive: { type: String }\n    },\n    data () {\n      return {\n        activeItem: null,\n        lastActiveIndex: null\n      }\n    },\n    mounted () {\n      // console.log('items:', this.items)\n      if (this.defaultActive) {\n        this.setActive(this.defaultActive)\n      }\n    },\n    computed: {\n      classObject () {\n        return [\n          'fish menu',\n          this.mode,\n          this.size,\n          {'compact': this.compact}\n        ]\n      }\n    },\n    methods: {\n      clickHandler (evt) {\n        if (evt.index === undefined) return\n        this.setActive(evt.index)\n        this.$emit('change', evt.index)\n        this.$emit('click', evt)\n      },\n      setActive (index) {\n        if (index === undefined) return\n        // console.log('index:', index, 'lastIndex:', this.lastActiveIndex)\n        let items = this.getItems()\n        this.lastActiveIndex && this.lastActiveIndex.toString().split(this.indexDelimiter).forEach((i) => {\n          // console.log('last.i:', i, '>>>', items[i])\n          try {\n            items[i].active = false\n            if (items[i].mode === 'inline') items[i].visible = false\n            items = items[i].items\n          } catch (e) {}\n        })\n\n        this.lastActiveIndex = index\n        items = this.getItems()\n        index.toString().split(this.indexDelimiter).forEach((i) => {\n          // console.log('::::::::::', i, '>>>', items[i])\n          if (items[i] !== undefined) {\n            try {\n              items[i].active = true\n              if (items[i].mode === 'inline') items[i].visible = true\n              // console.log('sub', items[i])\n              items = items[i].items\n            } catch (e) {}\n          }\n        })\n      },\n      getItems () {\n        const items = {}\n        this.$children.forEach((ele) => {\n          if (ele.$options.name === 'fish-optgroup') {\n            ele.$children.forEach((e) => {\n              if (e.$options.name === 'fish-option') this.items[ele.index] = e\n            })\n          } else if (['fish-option', 'fish-submenu'].includes(ele.$options.name)) {\n            items[ele.index] = ele\n          }\n        })\n        return items\n      }\n    }\n\n  }\n</script>\n"]}]}