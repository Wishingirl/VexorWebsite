{"remainingRequest":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\TransferPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\TransferPanel.vue","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZmlzaC10cmFuc2Zlci1wYW5lbCcsCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ2l0ZW0nIH0sCiAgICB3aWR0aDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDIwMCB9LAogICAgaGVpZ2h0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMjAwIH0sCiAgICBkcmFnZ2FibGU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwKICAgIGRhdGE6IHsgdHlwZTogQXJyYXksIGRlZmF1bHQ6ICgpID0+IFtdIH0sIC8vIFt7a2V5OiAnJywgbGFiZWw6ICcnLCBkaXNhYmxlZDogZmFsc2V9XQogICAgbm9EYXRhVGV4dDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdubyBkYXRhJyB9CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFsbERpc2FibGVkOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRLZXlzOiBbXSwKICAgICAgZWxlRHJhZzogbnVsbAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGRhdGEgKG5WYWwsIG9WYWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coJzo6Om5WYWw6JywgblZhbCwgJywgb1ZhbDonLCBvVmFsKQogICAgICBpZiAoblZhbC5sZW5ndGggIT09IG9WYWwubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEtleXMgPSBbXQogICAgICAgIGlmIChuVmFsLmxlbmd0aCA9PT0gMCB8fCBuVmFsLmV2ZXJ5KCh2KSA9PiB2LmRpc2FibGVkKSkgewogICAgICAgICAgdGhpcy4kcmVmcy5jaGVja2JveC5hY3RpdmUgPSBmYWxzZQogICAgICAgICAgdGhpcy5hbGxEaXNhYmxlZCA9IHRydWUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hbGxEaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdGl0bGVWaWV3ICgpIHsKICAgICAgbGV0IHR4dCA9ICcnCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkS2V5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgdHh0ICs9IHRoaXMuc2VsZWN0ZWRLZXlzLmxlbmd0aCArICcvJwogICAgICB9CiAgICAgIHJldHVybiB0eHQgKyB0aGlzLmRhdGEubGVuZ3RoICsgJyAnICsgdGhpcy50aXRsZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZHJhZ1N0YXJ0SGFuZGxlciAoZXZ0KSB7CiAgICAgIGV2dC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJwogICAgICB0aGlzLmVsZURyYWcgPSBldnQudGFyZ2V0CiAgICB9LAogICAgZHJhZ092ZXJIYW5kbGVyIChldnQpIHsKICAgICAgZXZ0LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnCiAgICB9LAogICAgZHJhZ0VudGVySGFuZGxlciAoZXZ0KSB7CiAgICAgIC8vIGV2dC50YXJnZXQuYWRkQ2xhc3NOYW1lKCdhY3RpdmUnKQogICAgfSwKICAgIGRyYWdMZWF2ZUhhbmRsZXIgKGV2dCkgewogICAgICAvLyBldnQudGFyZ2V0LnJlbW92ZUNsYXNzTmFtZSgnYWN0aXZlJykKICAgIH0sCiAgICBkcm9wSGFuZGxlciAoZXZ0LCBpbmRleCkgewogICAgICBpZiAodGhpcy5lbGVEcmFnICE9PSBldnQudGFyZ2V0KSB7CiAgICAgICAgY29uc3Qgb2xkSW5kZXggPSB0aGlzLmVsZURyYWcuZ2V0QXR0cmlidXRlKCdkcmFnLWluZGV4JykKICAgICAgICBsZXQgbkRhdGEgPSBBcnJheS5mcm9tKHRoaXMuZGF0YSkKICAgICAgICBsZXQgdG1wID0gbkRhdGFbb2xkSW5kZXhdCiAgICAgICAgbkRhdGFbb2xkSW5kZXhdID0gbkRhdGFbaW5kZXhdCiAgICAgICAgbkRhdGFbaW5kZXhdID0gdG1wCiAgICAgICAgdGhpcy4kZW1pdCgncmVvcmRlcicsIG5EYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS5rZXkpKQogICAgICB9CiAgICB9LAogICAgZHJhZ0VuZEhhbmRsZXIgKGV2dCkgewogICAgfSwKICAgIGFsbENoZWNrYm94Q2xpY2tIYW5kbGVyIChldnQpIHsKICAgICAgbGV0IF9jYiA9IHRoaXMuJHJlZnMuY2hlY2tib3gKICAgICAgdGhpcy4kcmVmcy5jaGVja2JveGVzLmZvckVhY2goKGNiKSA9PiB7CiAgICAgICAgaWYgKCFjYi5kaXNhYmxlZCkgY2IuYWN0aXZlID0gX2NiLmFjdGl2ZQogICAgICB9KQogICAgICBsZXQga2V5cyA9IHRoaXMuJHJlZnMuY2hlY2tib3hlcy5maWx0ZXIoKGNiKSA9PiB7IHJldHVybiBjYi5hY3RpdmUgfSkubWFwKChjYikgPT4gY2IuaW5kZXgpCiAgICAgIHRoaXMuZW1pdENoYW5nZShrZXlzKQogICAgfSwKICAgIGNoZWNrYm94Q2xpY2tIYW5kbGVyIChldnQpIHsKICAgICAgbGV0IGtleXMgPSB0aGlzLiRyZWZzLmNoZWNrYm94ZXMuZmlsdGVyKChjYikgPT4geyByZXR1cm4gY2IuYWN0aXZlIH0pLm1hcCgoY2IpID0+IGNiLmluZGV4KQogICAgICBpZiAoa2V5cy5sZW5ndGggPT09IHRoaXMuJHJlZnMuY2hlY2tib3hlcy5sZW5ndGggJiYgIXRoaXMuJHJlZnMuY2hlY2tib3guYWN0aXZlKSB0aGlzLiRyZWZzLmNoZWNrYm94LmFjdGl2ZSA9IHRydWUKICAgICAgZWxzZSB0aGlzLiRyZWZzLmNoZWNrYm94LmFjdGl2ZSA9IGZhbHNlCiAgICAgIHRoaXMuZW1pdENoYW5nZShrZXlzKQogICAgfSwKICAgIGVtaXRDaGFuZ2UgKGtleXMpIHsKICAgICAgdGhpcy5zZWxlY3RlZEtleXMgPSBrZXlzCiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIGtleXMpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["TransferPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TransferPanel.vue","sourceRoot":"node_modules/fish-ui/src/components","sourcesContent":["<template>\n  <div class=\"panel\" :style=\"{'width': `${width}px`}\">\n    <div class=\"header\">\n      <fish-checkbox index=\"all\" @click=\"allCheckboxClickHandler\" ref=\"checkbox\" :disabled=\"allDisabled\">{{ titleView }}</fish-checkbox>\n    </div>\n    <div class=\"body\" :style=\"{'height': `${height}px`}\">\n      <template v-if=\"data && data.length > 0\">\n        <div :class=\"[`item`, {'disabled': item.disabled}]\" v-for=\"(item, index) in data\" :key=\"item.key\"\n             :draggable=\"draggable\"\n             :drag-index=\"index\"\n             @dragstart=\"dragStartHandler\"\n             @dragover.prevent=\"dragOverHandler\"\n             @dragenter.prevent=\"dragEnterHandler\"\n             @dragleave.prevent=\"dragLeaveHandler\"\n             @drop.prevent=\"dropHandler($event, index)\"\n             @dragend=\"dragEndHandler\">\n          <fish-checkbox :disabled=\"item.disabled\" :index=\"item.key\" @click=\"checkboxClickHandler\" ref=\"checkboxes\">{{ item.label }}</fish-checkbox>\n        </div>\n      </template>\n      <div class=\"item\" v-else>{{ noDataText }}</div>\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    name: 'fish-transfer-panel',\n    props: {\n      title: { type: String, default: 'item' },\n      width: { type: Number, default: 200 },\n      height: { type: Number, default: 200 },\n      draggable: { type: Boolean, default: false },\n      data: { type: Array, default: () => [] }, // [{key: '', label: '', disabled: false}]\n      noDataText: { type: String, default: 'no data' }\n    },\n    data () {\n      return {\n        allDisabled: false,\n        selectedKeys: [],\n        eleDrag: null\n      }\n    },\n    watch: {\n      data (nVal, oVal) {\n        // console.log(':::nVal:', nVal, ', oVal:', oVal)\n        if (nVal.length !== oVal.length) {\n          this.selectedKeys = []\n          if (nVal.length === 0 || nVal.every((v) => v.disabled)) {\n            this.$refs.checkbox.active = false\n            this.allDisabled = true\n          } else {\n            this.allDisabled = false\n          }\n        }\n      }\n    },\n    computed: {\n      titleView () {\n        let txt = ''\n        if (this.selectedKeys.length > 0) {\n          txt += this.selectedKeys.length + '/'\n        }\n        return txt + this.data.length + ' ' + this.title\n      }\n    },\n    methods: {\n      dragStartHandler (evt) {\n        evt.dataTransfer.effectAllowed = 'move'\n        this.eleDrag = evt.target\n      },\n      dragOverHandler (evt) {\n        evt.dataTransfer.dropEffect = 'move'\n      },\n      dragEnterHandler (evt) {\n        // evt.target.addClassName('active')\n      },\n      dragLeaveHandler (evt) {\n        // evt.target.removeClassName('active')\n      },\n      dropHandler (evt, index) {\n        if (this.eleDrag !== evt.target) {\n          const oldIndex = this.eleDrag.getAttribute('drag-index')\n          let nData = Array.from(this.data)\n          let tmp = nData[oldIndex]\n          nData[oldIndex] = nData[index]\n          nData[index] = tmp\n          this.$emit('reorder', nData.map((item) => item.key))\n        }\n      },\n      dragEndHandler (evt) {\n      },\n      allCheckboxClickHandler (evt) {\n        let _cb = this.$refs.checkbox\n        this.$refs.checkboxes.forEach((cb) => {\n          if (!cb.disabled) cb.active = _cb.active\n        })\n        let keys = this.$refs.checkboxes.filter((cb) => { return cb.active }).map((cb) => cb.index)\n        this.emitChange(keys)\n      },\n      checkboxClickHandler (evt) {\n        let keys = this.$refs.checkboxes.filter((cb) => { return cb.active }).map((cb) => cb.index)\n        if (keys.length === this.$refs.checkboxes.length && !this.$refs.checkbox.active) this.$refs.checkbox.active = true\n        else this.$refs.checkbox.active = false\n        this.emitChange(keys)\n      },\n      emitChange (keys) {\n        this.selectedKeys = keys\n        this.$emit('change', keys)\n      }\n    }\n  }\n</script>\n"]}]}