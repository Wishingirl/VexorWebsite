{"remainingRequest":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\TreeSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\fish-ui\\src\\components\\TreeSelect.vue","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\vue\\site\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjbGlja291dHNpZGUgZnJvbSAnLi4vZGlyZWN0aXZlcy9jbGlja291dHNpZGUnCmltcG9ydCB7IG5vdGlmeSB9IGZyb20gJy4uL2NvbmZpZycKaW1wb3J0IGZpc2hUcmVlIGZyb20gJy4vVHJlZS52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge2Zpc2hUcmVlfSwKICBuYW1lOiAnZmlzaC10cmVlLXNlbGVjdCcsCiAgZGlyZWN0aXZlczogeyBjbGlja291dHNpZGUgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsgdHlwZTogW1N0cmluZywgTnVtYmVyLCBBcnJheV0gfSwKICAgIGRhdGE6IHsgdHlwZTogQXJyYXksIHJlcXVpcmVkOiB0cnVlIH0sCiAgICBoaW50OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSwKICAgIGV4cGFuZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LAogICAgbXVsdGlwbGU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwKICAgIGNoZWNrYWJsZWQ6IHsgdHlwZTogRnVuY3Rpb24sIGRlZmF1bHQ6IChtdWx0aXBsZSkgPT4gbXVsdGlwbGUgfSwKICAgIGljb25DbG9zZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdmYSBmYS1jbG9zZScgfSwKICAgIGljb25DYXJldFJpZ2h0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ2ZhIGZhLWNhcmV0LXJpZ2h0JyB9LAogICAgaWNvbkNhcmV0RG93bjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdmYSBmYS1jYXJldC1kb3duJyB9CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkSXRlbTogbnVsbCwKICAgICAgc2VsZWN0ZWRLZXk6ICcnLAogICAgICBjaGVja2VkSXRlbXM6IFtdLAogICAgICBjaGVja2VkS2V5czogW10sCiAgICAgIHNob3dDbGVhcjogZmFsc2UsCiAgICAgIHZpc2libGU6IGZhbHNlCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIC8vIHRoaXMucmVzZXRWYWx1ZXNXaXRoRGF0YSh0aGlzLmRhdGEpCiAgICB0aGlzLmluaXREYXRhKHRoaXMudmFsdWUpCiAgfSwKICB3YXRjaDogewogICAgdmFsdWUgKG5vd1ZhbCwgb2xkVmFsdWUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ25vd1ZhbDogJywgbm93VmFsLCB0aGlzLmRhdGEpCiAgICAgIHRoaXMuaW5pdERhdGEobm93VmFsKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZhbHVlRW1wdHkgKCkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSA/IHRoaXMudmFsdWUubGVuZ3RoIDw9IDAgOiAodGhpcy52YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMudmFsdWUgPT09IG51bGwgfHwgdGhpcy52YWx1ZS50b1N0cmluZygpID09PSAnJykKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXREYXRhICh2KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRLZXkgPSBBcnJheS5pc0FycmF5KHYpID8gKHZbMF0gfHwgJycpIDogdiB8fCAnJwogICAgICB0aGlzLmNoZWNrZWRLZXlzID0gdGhpcy5tdWx0aXBsZSA/IHYgfHwgW10gOiBbXQogICAgICB0aGlzLmNoZWNrZWRJdGVtcyA9IFtdCiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbAogICAgICB0aGlzLnJlc2V0VmFsdWVzV2l0aERhdGEodGhpcy5kYXRhKQogICAgfSwKICAgIHJlc2V0VmFsdWVzV2l0aERhdGEgKGl0ZW1zKSB7CiAgICAgIGl0ZW1zICYmIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZEtleXMuaW5jbHVkZXMoaXRlbS5rZXkpKSB7CiAgICAgICAgICAgIHRoaXMuY2hlY2tlZEl0ZW1zLnB1c2goaXRlbSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRLZXkgPT09IGl0ZW0ua2V5KSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW0KICAgICAgICB9CiAgICAgICAgdGhpcy5yZXNldFZhbHVlc1dpdGhEYXRhKGl0ZW0uY2hpbGRyZW4pCiAgICAgIH0pCiAgICB9LAogICAgbW91c2VPdmVySGFuZGxlciAoKSB7CiAgICAgIHRoaXMuc2hvd0NsZWFyID0gdHJ1ZQogICAgfSwKICAgIG1vdXNlT3V0SGFuZGxlciAoKSB7CiAgICAgIHRoaXMuc2hvd0NsZWFyID0gZmFsc2UKICAgIH0sCiAgICBjbGlja0hhbmRsZXIgKCkgewogICAgICB0aGlzLnZpc2libGUgPSAhdGhpcy52aXNpYmxlCiAgICB9LAogICAgaXRlbUNsaWNrSGFuZGxlciAoaXRlbSkgewogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgcmV0dXJuCiAgICAgIHRoaXMuZW1pdENoYW5nZShpdGVtLmtleSwgaXRlbSkKICAgICAgdGhpcy5hd2F5SGFuZGxlcigpCiAgICB9LAogICAgaXRlbUNoZWNrZWRIYW5kbGVyIChjaGVja2VkS2V5cykgewogICAgICB0aGlzLmVtaXRDaGFuZ2UoY2hlY2tlZEtleXMsIFtdKQogICAgfSwKICAgIGNsb3NlSXRlbUhhbmRsZXIgKGl0ZW0pIHsKICAgICAgdGhpcy5lbWl0Q2hhbmdlKHRoaXMuY2hlY2tlZEtleXMuZmlsdGVyKChrZXkpID0+IGtleSAhPT0gaXRlbS5rZXkpLCBbXSkKICAgIH0sCiAgICBjbGVhckhhbmRsZXIgKCkgewogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmVtaXRDaGFuZ2UoW10sIFtdKQogICAgfSwKICAgIGVtaXRDaGFuZ2UgKHYsIHZ2KSB7CiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IHYKICAgICAgICB0aGlzLmNoZWNrZWRJdGVtcyA9IFtdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHYubGVuZ3RoIDw9IDApIHYgPSAnJwogICAgICAgIHRoaXMuc2VsZWN0ZWRLZXkgPSB2IHx8ICcnCiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsCiAgICAgIH0KICAgICAgdGhpcy5yZXNldFZhbHVlc1dpdGhEYXRhKHRoaXMuZGF0YSkKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2KQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB2LCB2dikKICAgICAgbm90aWZ5LmZpZWxkLmNoYW5nZSh0aGlzKQogICAgfSwKICAgIGF3YXlIYW5kbGVyICgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5zaG93Q2xlYXIgPSBmYWxzZQogICAgfQogIH0KfQo="},{"version":3,"sources":["TreeSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TreeSelect.vue","sourceRoot":"node_modules/fish-ui/src/components","sourcesContent":["<template>\n  <div :class=\"['fish select tree-select', {'multiple': multiple}]\"\n       @click=\"clickHandler\"\n       @mouseover=\"mouseOverHandler\"\n       @mouseout=\"mouseOutHandler\"\n       v-clickoutside=\"awayHandler\">\n    <template v-if=\"multiple\">\n      <a class=\"tag\" @click.stop=\"()=>{}\"\n         v-for=\"(item, index) in checkedItems\" :key=\"index\">\n        {{ item.title }}\n        <i :class=\"iconClose\" @click.stop=\"closeItemHandler(item)\"></i>\n      </a>\n      <div class=\"text hint\" v-html=\"valueEmpty ? hint : ''\"></div>\n    </template>\n    <div :class=\"['text', {'hint': valueEmpty}]\" v-else>\n      {{ selectedItem && selectedItem.title || hint }}\n    </div>\n    <i class=\"fa fa-times-circle\" style=\"opacity: .6;\" @click.stop=\"clearHandler\" v-if=\"showClear && !valueEmpty\"></i>\n    <i class=\"fa fa-angle-down\" v-else></i>\n    <div class=\"content\" v-show=\"visible\" @click.stop=\"()=>{}\">\n      <fish-tree\n          :data=\"data\"\n          :default-selected-key=\"selectedKey\"\n          :default-checked-keys=\"checkedKeys\"\n          :multiple=\"multiple\"\n          :expand=\"expand\"\n          :checkabled=\"checkabled\"\n          :iconCaretRight=\"iconCaretRight\"\n          :iconCaretDown=\"iconCaretDown\"\n          @item-click=\"itemClickHandler\"\n          @item-checked=\"itemCheckedHandler\"></fish-tree>\n    </div>\n  </div>\n</template>\n<script>\n  import clickoutside from '../directives/clickoutside'\n  import { notify } from '../config'\n  import fishTree from './Tree.vue'\n\n  export default {\n    components: {fishTree},\n    name: 'fish-tree-select',\n    directives: { clickoutside },\n    props: {\n      value: { type: [String, Number, Array] },\n      data: { type: Array, required: true },\n      hint: { type: String, default: '' },\n      expand: { type: Boolean, default: false },\n      multiple: { type: Boolean, default: false },\n      checkabled: { type: Function, default: (multiple) => multiple },\n      iconClose: { type: String, default: 'fa fa-close' },\n      iconCaretRight: { type: String, default: 'fa fa-caret-right' },\n      iconCaretDown: { type: String, default: 'fa fa-caret-down' }\n    },\n    data () {\n      return {\n        selectedItem: null,\n        selectedKey: '',\n        checkedItems: [],\n        checkedKeys: [],\n        showClear: false,\n        visible: false\n      }\n    },\n    mounted () {\n      // this.resetValuesWithData(this.data)\n      this.initData(this.value)\n    },\n    watch: {\n      value (nowVal, oldValue) {\n        // console.log('nowVal: ', nowVal, this.data)\n        this.initData(nowVal)\n      }\n    },\n    computed: {\n      valueEmpty () {\n        return Array.isArray(this.value) ? this.value.length <= 0 : (this.value === undefined || this.value === null || this.value.toString() === '')\n      }\n    },\n    methods: {\n      initData (v) {\n        this.selectedKey = Array.isArray(v) ? (v[0] || '') : v || ''\n        this.checkedKeys = this.multiple ? v || [] : []\n        this.checkedItems = []\n        this.selectedItem = null\n        this.resetValuesWithData(this.data)\n      },\n      resetValuesWithData (items) {\n        items && items.forEach((item) => {\n          if (this.multiple) {\n            if (this.checkedKeys.includes(item.key)) {\n              this.checkedItems.push(item)\n            }\n          } else if (this.selectedKey === item.key) {\n            this.selectedItem = item\n          }\n          this.resetValuesWithData(item.children)\n        })\n      },\n      mouseOverHandler () {\n        this.showClear = true\n      },\n      mouseOutHandler () {\n        this.showClear = false\n      },\n      clickHandler () {\n        this.visible = !this.visible\n      },\n      itemClickHandler (item) {\n        if (this.multiple) return\n        this.emitChange(item.key, item)\n        this.awayHandler()\n      },\n      itemCheckedHandler (checkedKeys) {\n        this.emitChange(checkedKeys, [])\n      },\n      closeItemHandler (item) {\n        this.emitChange(this.checkedKeys.filter((key) => key !== item.key), [])\n      },\n      clearHandler () {\n        this.visible = false\n        this.emitChange([], [])\n      },\n      emitChange (v, vv) {\n        if (this.multiple) {\n          this.checkedKeys = v\n          this.checkedItems = []\n        } else {\n          if (v.length <= 0) v = ''\n          this.selectedKey = v || ''\n          this.selectedItem = null\n        }\n        this.resetValuesWithData(this.data)\n        this.$emit('input', v)\n        this.$emit('change', v, vv)\n        notify.field.change(this)\n      },\n      awayHandler () {\n        this.visible = false\n        this.showClear = false\n      }\n    }\n  }\n</script>\n"]}]}